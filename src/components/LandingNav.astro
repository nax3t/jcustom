---
import { Image } from 'astro:assets';
import logoWhite from '../assets/images/logo-white.webp';
import logoDark from '../assets/images/logo-dark.webp';

const landingNavLinks = [
  { label: 'Home', href: '/' },
  { label: 'Services', href: '/#services' },
  { label: 'Showcase', href: '/#showcase' },
  { label: 'Process', href: '/#process' },
  { label: 'Contact', href: '#contact' },
];
---

<nav
  x-data="{ scrolled: false, mobileOpen: false, init() { const onScroll = () => { this.scrolled = window.scrollY > 50; }; window.addEventListener('scroll', onScroll, { passive: true }); onScroll(); } }"
  :class="{ 'bg-white/[.99] shadow-sm': scrolled, 'bg-dark': !scrolled }"
  class="fixed top-0 left-0 w-full z-50 transition-all duration-200"
>
  <div class="max-w-[1318px] mx-auto px-6 md:px-8 flex items-center justify-between h-[85px]"
       :class="{ 'h-[65px]': scrolled && !mobileOpen }">
    <a href="/" class="relative shrink-0">
      <Image
        src={logoWhite}
        alt="JCustom Deck and Patio Company Logo"
        width={188}
        height={37}
        class="transition-opacity duration-200"
        :class="scrolled ? 'opacity-0 absolute' : 'opacity-100'"
      />
      <Image
        src={logoDark}
        alt="JCustom Deck and Patio Company Logo"
        width={188}
        height={37}
        class="transition-opacity duration-200"
        :class="scrolled ? 'opacity-100' : 'opacity-0 absolute'"
      />
    </a>

    <!-- Mobile Menu Button -->
    <button
      class="lg:hidden p-2 -mr-2"
      @click="mobileOpen = !mobileOpen"
      :aria-expanded="mobileOpen.toString()"
      aria-label="Toggle navigation menu"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
           :class="scrolled ? 'text-black' : 'text-white'">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              x-show="!mobileOpen" d="M4 6h16M4 12h16M4 18h16" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              x-show="mobileOpen" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Desktop Nav -->
    <ul class="hidden lg:flex items-center gap-9 text-lg font-normal">
      {landingNavLinks.map(({ label, href }) => (
        <li>
          <a
            href={href}
            class="transition-opacity duration-200 hover:opacity-100"
            :class="{
              'text-white opacity-80 hover:opacity-100': !scrolled,
              'text-gray-600 hover:text-black': scrolled,
            }"
          >
            {label}
          </a>
        </li>
      ))}
    </ul>
  </div>

  <!-- Mobile Nav -->
  <div
    x-show="mobileOpen"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-2"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-2"
    class="lg:hidden bg-[rgba(18,18,18,.99)]"
    @click.outside="mobileOpen = false"
  >
    <ul class="py-2">
      {landingNavLinks.map(({ label, href }) => (
        <li>
          <a
            href={href}
            @click="mobileOpen = false"
            class="block px-6 py-3 text-white/80 hover:text-white text-lg transition-colors"
          >
            {label}
          </a>
        </li>
      ))}
    </ul>
  </div>
</nav>
